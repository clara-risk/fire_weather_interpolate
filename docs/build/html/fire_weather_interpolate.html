
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fire_weather_interpolate functions &#8212; Fire Weather Interpolate 0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Fire Weather Interpolate 0.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fire_weather_interpolate functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fire-weather-interpolate-functions">
<h1>fire_weather_interpolate functions<a class="headerlink" href="#fire-weather-interpolate-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-Eval">
<span id="eval"></span><h2>Eval<a class="headerlink" href="#module-Eval" title="Permalink to this headline">¶</a></h2>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p>Functions to evaluate the outputs of the FWI metrics functions, such as ridge regression for relating the metrics to area burned.</p>
<p class="rubric">References</p>
<p>scikit-learn developers. (2020). sklearn.linear_model.RidgeCV. <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RidgeCV.html">https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.RidgeCV.html</a>.</p>
<p>jpainam , kshedden, josef-pkt, vnijs, &amp; anuragwatane. (2019, June 10). How to compute pseudo R^2 for GLM estimators, Issue #5861, statsmodels/statsmodels. GitHub. <a class="reference external" href="https://github.com/statsmodels/statsmodels/issues/5861">https://github.com/statsmodels/statsmodels/issues/5861</a>.</p>
<p>One-Off Coder. (2021, April 19). 2. Psuedo r-squared for logistic regression. 2. Psuedo r-squared for logistic regression - Data Science Topics 0.0.1 documentation. <a class="reference external" href="https://datascience.oneoffcoder.com/psuedo-r-squared-logistic-regression.html">https://datascience.oneoffcoder.com/psuedo-r-squared-logistic-regression.html</a>.</p>
<dl class="py function">
<dt id="Eval.check_p_value">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">check_p_value</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_excel_spreadsheet</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.check_p_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Quality-control for p-value calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path_to_excel_spreadsheet</strong> (<em>string</em>) – path to the spreadsheet containing the fire season start/end values,
Notes: No trailing 0s in speadsheet, no space after parameter name in header</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.get_MAE">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">get_MAE</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">absolute_error_dictionary</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.get_MAE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mean absolute error</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>absolute_error_dictionary</strong> (<em>dictionary</em>) – dictionary output from the cross-validation procedure</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>highest absolute error at any of the stations</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.get_RMSE">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">get_RMSE</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">absolute_error_dictionary</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.get_RMSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate RMSE</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>absolute_error_dictionary</strong> (<em>dictionary</em>) – dictionary output from the cross-validation procedure</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>RMSE value</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.get_interpolated_val_in_fire">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">get_interpolated_val_in_fire</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fire_shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolated_surface</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.get_interpolated_val_in_fire" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a function to get the FWI metric value inside the fire.
We will use to calculate the max FWI metrics for a fire.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fire_shapefile</strong> (<em>string</em>) – path to the fire shapefile</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – lookup dictionary of lat lon for each station</p></li>
<li><p><strong>interpolated_surface</strong> (<em>ndarray</em>) – an array of values in the study area</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>maximum value in fire, either the closest point to the convex hull of the fire or a sum of the points inside the fire</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.get_report_date_plus_three">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">get_report_date_plus_three</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fire_shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.get_report_date_plus_three" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to return the first four days of the fire</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fire_shapefile</strong> (<em>string</em>) – path to the fire shapefile</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>fire_dates</strong> –</p>
<ul class="simple">
<li><p>list of the report date and three days after</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.highest_value_first_four_days">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">highest_value_first_four_days</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fire_shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolated_surface_d1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolated_surface_d2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolated_surface_d3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolated_surface_d4</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.highest_value_first_four_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to return the highest FWI values in a fire for four input arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fire_shapefile</strong> (<em>string</em>) – path to the fire shapefile</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – lookup dictionary of lat lon for each station</p></li>
<li><p><strong>interpolated_surface_d1</strong> (<em>ndarray</em>) – an array of values in the study area, in the first four days of the fire</p></li>
<li><p><strong>d2</strong> (<em>ndarray</em>) – an array of values in the study area, in the first four days of the fire</p></li>
<li><p><strong>d3</strong> (<em>ndarray</em>) – an array of values in the study area, in the first four days of the fire</p></li>
<li><p><strong>d4</strong> (<em>ndarray</em>) – an array of values in the study area, in the first four days of the fire</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>maximum value for first four days since report date</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.is_it_in_zone">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">is_it_in_zone</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_zones</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Zone1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Zone2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Zone3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Zone4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.is_it_in_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a fire is inside a zone (ecozone, intensively managed zone, etc.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>string</em>) – path to the location where the fire shapefiles are stored by year</p></li>
<li><p><strong>file_path_zones</strong> (<em>string</em>) – path to where the shapefiles for the zones are located</p></li>
<li><p><strong>Zone1-4</strong> (<em>string</em>) – names of the zones, Zone1 is required, the rest are optional, takes up to 4
Note: if you are not using the other three zones, input “None”</p></li>
<li><p><strong>save_path</strong> (<em>string</em>) – path where you want to save the output text file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.linear_regression">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">linear_regression</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_excel_spreadsheet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_distributions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_residual_histogram</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.linear_regression" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a linear regression model and print out the resulting coefficients and (if True) the histogram of residuals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_excel_spreadsheet</strong> (<em>string</em>) – path to the spreadsheet containing the fire season start/end values,
Notes: No trailing 0s in speadsheet, no space after parameter name in header</p></li>
<li><p><strong>plot_distributions</strong> (<em>bool</em>) – if True, will plot the correlation diagram for all the variables</p></li>
<li><p><strong>plot_residual_histogram</strong> (<em>bool</em>) – if True, will plot a histogram showing the residuals to check if normally distributed</p></li>
<li><p><strong>transform</strong> (<em>bool</em>) – if True, it will transform the input data, to make it normally distributed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.plot">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">plot</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw1_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw2_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idew1_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idew2_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpss_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rf_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ok_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot all the maps for the different spatial interpolation methods on one figure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shapefile</strong> – path to the study area shapefile</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.plot_LOOCV_error">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">plot_LOOCV_error</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.plot_LOOCV_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a map of the LOOCV error (not absolute valued) so we can see the variation in error
accross the study area</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – lookup dictionary for station locations</p></li>
<li><p><strong>error_dictionary</strong> (<em>dictionary</em>) – a dictionary of the error, produced by the cross-validate function</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – variable name, for example, Start Day (Days since March 1)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.ridge_regression">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">ridge_regression</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_excel_spreadsheet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_distributions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_residual_histogram</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.ridge_regression" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a ridge regression model and print out the resulting coefficients and (if True) the histogram of residuals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_excel_spreadsheet</strong> (<em>string</em>) – path to the spreadsheet containing the FWI values for each fire and the other covariates,
Notes: No trailing 0s in speadsheet, no space after parameter name in header</p></li>
<li><p><strong>var1-10</strong> (<em>string</em>) – variable names, corresponding to the header names</p></li>
<li><p><strong>all_variables</strong> (<em>bool</em>) – if True, will use all the variables, not just the FWI metrics</p></li>
<li><p><strong>plot_distributions</strong> (<em>bool</em>) – if True, will plot the correlation diagram for all the variables</p></li>
<li><p><strong>plot_residual_histogram</strong> (<em>bool</em>) – if True, will plot a histogram showing the residuals to check if normally distributed</p></li>
<li><p><strong>transform</strong> (<em>bool</em>) – if True, it will transform the input data (i.e. the fire surface area),
to make it normally distributed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.ridge_regression_stratify">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">ridge_regression_stratify</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_excel_spreadsheet</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_distributions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_residual_histogram</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stratify_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecozone_condition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.ridge_regression_stratify" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a ridge regression model stratified based on different ecozones and fire characteristics
and print out the resulting coefficients and (if True) the histogram of residuals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_excel_spreadsheet</strong> (<em>string</em>) – path to the spreadsheet containing the FWI values for each fire and the other covariates,
Notes: No trailing 0s in speadsheet, no space after parameter name in header</p></li>
<li><p><strong>var1-10</strong> (<em>string</em>) – variable names, corresponding to the header titles</p></li>
<li><p><strong>all_variables</strong> (<em>bool</em>) – if True, will use all the variables, not just the FWI metrics</p></li>
<li><p><strong>plot_distributions</strong> (<em>bool</em>) – if True, will plot the correlation diagram for all the variables</p></li>
<li><p><strong>plot_residual_histogram</strong> (<em>bool</em>) – if True, will plot a histogram showing the residuals to check if normally distributed</p></li>
<li><p><strong>stratify_condition</strong> (<em>string</em>) – can be one of ‘human’, ‘lightning’, ‘60conifer’, ‘60conifer &amp; lightning’,’none’</p></li>
<li><p><strong>size_condition</strong> (<em>string</em>) – can be one of ‘all’, ‘&lt;200’, ‘&gt;=200’</p></li>
<li><p><strong>ecozone_condition</strong> (<em>string</em>) – can be one of ‘none’,’taiga’,’boreal1’ (west), ‘boreal2’ (east), ‘hudson’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.select_random_station">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">select_random_station</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">used_stations</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.select_random_station" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a random station from each group for bagging xval</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>groups</strong> (<em>dictionary</em>) – dictionary of what group each station belongs to</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement</p></li>
<li><p><strong>used_stations</strong> (<em>list</em>) – empty list if using replacement, if not, it is a list of already used stations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary of selected stations</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.stratify_dataset">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">stratify_dataset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stratify_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.stratify_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a sub-function that will be called to stratify the fires based on different
characteristics in the ridge regression (stratify) function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas dataframe</em>) – dataframe of the spreadsheet containing the information for each fire</p></li>
<li><p><strong>stratify_condition</strong> (<em>string</em>) – characteristics of fire/fire location you want to preserve in the dataset,
one of: “none”, “human”,”lightning”,”60conifer”,”60conifer &amp; lightning”</p></li>
<li><p><strong>size_condition</strong> (<em>string</em>) – size condition you want to use to stratify (select specific rows), either “all”, “&lt;200”,”&gt;=200”</p></li>
<li><p><strong>all_variables</strong> (<em>bool</em>) – if True, create an array with all the variables (not just FWI metrics) for regression</p></li>
<li><p><strong>var1-10</strong> (<em>string</em>) – variable names, corresponding to the header names</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array of predictor variables, for input to the regression</p></li>
</ul>
</li>
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array of response variables, for input to the regression</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="Eval.stratify_size">
<code class="sig-prename descclassname"><span class="pre">Eval.</span></code><code class="sig-name descname"><span class="pre">stratify_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_condition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Eval.stratify_size" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a sub-function that will be called to stratify the fires based on size in the
ridge regression (stratify) function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas dataframe</em>) – dataframe of the spreadsheet containing the information for each fire</p></li>
<li><p><strong>size_condition</strong> (<em>string</em>) – size condition you want to use to stratify (select specific rows), either “all”, “&lt;200”,”&gt;=200”</p></li>
<li><p><strong>all_variables</strong> (<em>bool</em>) – if True, create an array with all the variables (not just FWI metrics) for regression</p></li>
<li><p><strong>var1-10</strong> (<em>string</em>) – variable names, corresponding to the header names</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array of predictor variables, for input to the regression</p></li>
</ul>
</li>
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array of response variables, for input to the regression</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-auto_select">
<span id="auto-select"></span><h2>auto_select<a class="headerlink" href="#module-auto_select" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Summary<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Auto-selection protocol for spatial interpolation methods using shuffle-split cross-validation.</p>
<dl class="py function">
<dt id="auto_select.execute_sequential_calc">
<code class="sig-prename descclassname"><span class="pre">auto_select.</span></code><code class="sig-name descname"><span class="pre">execute_sequential_calc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path_hourly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_daily_csv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dictionary_hourly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dictionary_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'pcp':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">5e+05,</span> <span class="pre">4.67e+05],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'rh':</span> <span class="pre">['307**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">6.62e+04,</span> <span class="pre">1.07e+04],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'temp':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">5e+05,</span> <span class="pre">6.01e+03],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'wind':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">6.62e+04,</span> <span class="pre">1.07e+04],</span> <span class="pre">nu=0.5)']}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_select.execute_sequential_calc" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the DC, DMC, FFMC sequential calculations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path_hourly</strong> (<em>string</em>) – path to hourly feather files</p></li>
<li><p><strong>file_path_daily</strong> (<em>string</em>) – path to daily feather files</p></li>
<li><p><strong>file_path_daily_csv</strong> (<em>string</em>) – path to daily csv files</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – name of weather variable you are interpolating</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – date of weather data (day of fire season)</p></li>
<li><p><strong>loc_dictionary_daily</strong> (<em>dictionary</em>) – dictionary of station locations (daily)</p></li>
<li><p><strong>loc_dictionary_hourly</strong> (<em>dictionary</em>) – dictionary of station locations (hourly)</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year to execute sequential calculations for</p></li>
<li><p><strong>interpolation_types</strong> (<em>list</em>) – list of interpolation types to consider</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications to run</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>save_path</strong> (<em>string</em>) – where in computer to save the output file to</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to study area shapefile (ON + QC)</p></li>
<li><p><strong>shapefile2</strong> (<em>string</em>) – path to boreal shapefile</p></li>
<li><p><strong>phi_input</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing, default is None (it is calculated)</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
<li><p><strong>kernels</strong> (<em>dictionary</em>) – the kernels for each weather variable for gaussian process regression</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>list of array of FWI codes for each day in fire season</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="auto_select.run_comparison">
<code class="sig-prename descclassname"><span class="pre">auto_select.</span></code><code class="sig-name descname"><span class="pre">run_comparison</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cvar_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi_input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'pcp':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">5e+05,</span> <span class="pre">4.67e+05],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'rh':</span> <span class="pre">['307**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">6.62e+04,</span> <span class="pre">1.07e+04],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'temp':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">5e+05,</span> <span class="pre">6.01e+03],</span> <span class="pre">nu=0.5)'],</span> <span class="pre">'wind':</span> <span class="pre">['316**2</span> <span class="pre">*</span> <span class="pre">Matern(length_scale=[5e+05,</span> <span class="pre">6.62e+04,</span> <span class="pre">1.07e+04],</span> <span class="pre">nu=0.5)']}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_select.run_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the shuffle-split cross-validation for the given interpolation types</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var_name</strong> (<em>string</em>) – name of weather variable you are interpolating</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – date of weather data (day of fire season)</p></li>
<li><p><strong>interpolation_types</strong> (<em>list</em>) – list of interpolation types to consider</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications to run</p></li>
<li><p><strong>loc_dictionary</strong> (<em>dictionary</em>) – dictionary of station locations</p></li>
<li><p><strong>cvar_dictionary</strong> (<em>dictionary</em>) – dictionary containing the weather data for each station available</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>phi_input</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing, default is None (it is calculated)</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
<li><p><strong>kernels</strong> (<em>dictionary</em>) – the kernels for each weather variable for gaussian process regression</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>returns the selected interpolation type name</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-cluster_3d">
<span id="cluster-3d"></span><h2>cluster_3d<a class="headerlink" href="#module-cluster_3d" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Summary<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Code for making spatial clusters for cross-validation.</p>
<dl class="py function">
<dt id="cluster_3d.spatial_cluster">
<code class="sig-prename descclassname"><span class="pre">cluster_3d.</span></code><code class="sig-name descname"><span class="pre">spatial_cluster</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_2D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_3D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cluster_3d.spatial_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatial clustering based on scikit learn’s agglomerative clustering</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>clusternum</strong> (<em>int</em>) – number of clusters</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>plot_2D</strong> (<em>bool</em>) – whether to plot maps of the clusters in 2d</p></li>
<li><p><strong>plot_3D</strong> (<em>bool</em>) – whether to plot maps of the clusters in 3d</p></li>
<li><p><strong>return_all</strong> (<em>bool</em>) – whether or not to return all the outputs (needed for selecting cluster size)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of cluster that each station is in</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-fwi">
<span id="fwi"></span><h2>fwi<a class="headerlink" href="#module-fwi" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Summary<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Code for calculating the FWI metrics and calculating fire season duration.</p>
<p class="rubric">References</p>
<p>Wang, X., Wotton, B. M., Cantin, A. S., Parisien, M. A., Anderson, K., Moore,
B., &amp; Flannigan, M. D. (2017). cffdrs: an R package for the Canadian Forest
Fire Danger Rating System. Ecological Processes, 6(1). <a class="reference external" href="https://doi.org/10.1186/s13717-017-0070-z">https://doi.org/10.1186/s13717-017-0070-z</a></p>
<p>Wotton, B. M. (2009). Interpreting and using outputs from the Canadian Forest
Fire Danger Rating System in research applications. Environmental and Ecological
Statistics, 16(2), 107–131. <a class="reference external" href="https://doi.org/10.1007/s10651-007-0084-2">https://doi.org/10.1007/s10651-007-0084-2</a></p>
<p>Wotton, B. M., &amp; Flannigan, M. D. (1993). Length of the fire season in a
changing climate. Forestry Chronicle, 69(2), 187–192. <a class="reference external" href="https://doi.org/10.5558/tfc69187-2">https://doi.org/10.5558/tfc69187-2</a></p>
<p>Code is partially translated from R package:
<a class="reference external" href="https://github.com/cran/cffdrs/tree/master/R">https://github.com/cran/cffdrs/tree/master/R</a></p>
<dl class="py function">
<dt id="fwi.BUI">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">BUI</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dmc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.BUI" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate BUI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dmc</strong> (<em>ndarray</em>) – the dmc array for the date of interest</p></li>
<li><p><strong>dc</strong> (<em>ndarray</em>) – the dc array for the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether or not to display the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – mask for the start up date</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – mask for the shut down date</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array containing BUI values for the study area</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.DC">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">DC</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rain_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rh_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wind_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dc_yesterday</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_DC_val_before_shutdown</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwinter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.DC" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the DC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date of interest</p></li>
<li><p><strong>rain_grid</strong> (<em>ndarray</em>) – interpolated surface for rainfall on the date of interest</p></li>
<li><p><strong>temp_grid</strong> (<em>ndarray</em>) – interpolated surface for temperature on the date of interest</p></li>
<li><p><strong>wind_grid</strong> (<em>ndarray</em>) – interpolated surface for wind on the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>dc_yesterday</strong> (<em>ndarray</em>) – array of DC values for yesterday</p></li>
<li><p><strong>index</strong> (<em>int</em>) – index of the date since Mar 1</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to show the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – mask for the start dates</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – mask for the end dates</p></li>
<li><p><strong>last_DC_val_before_shutdown</strong> (<em>ndarray</em>) – array for last dc values before cell shut down, if no areas required the procedure, you can input an empty
array of the correct size (if not using overwinter, input the empty array)</p></li>
<li><p><strong>overwinter</strong> (<em>bool</em>) – whether or not to implement the overwinter procedure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array of dc values on the date on interest for the study area</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.DMC">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">DMC</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rain_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rh_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wind_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmc_yesterday</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.DMC" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the DMC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date of interest</p></li>
<li><p><strong>rain_grid</strong> (<em>ndarray</em>) – interpolated surface for rainfall on the date of interest</p></li>
<li><p><strong>temp_grid</strong> (<em>ndarray</em>) – interpolated surface for temperature on the date of interest</p></li>
<li><p><strong>wind_grid</strong> (<em>ndarray</em>) – interpolated surface for wind on the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>dc_yesterday</strong> (<em>ndarray</em>) – array of DC values for yesterday</p></li>
<li><p><strong>index</strong> (<em>int</em>) – index of the date since Mar 1</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to show the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – mask for the start dates</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – mask for the end dates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array of dmc values on the date on interest for the study area</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.FFMC">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">FFMC</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rain_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rh_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wind_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ffmc_yesterday</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.FFMC" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the FFMC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date of interest</p></li>
<li><p><strong>rain_grid</strong> (<em>ndarray</em>) – interpolated surface for rainfall on the date of interest</p></li>
<li><p><strong>temp_grid</strong> (<em>ndarray</em>) – interpolated surface for temperature on the date of interest</p></li>
<li><p><strong>wind_grid</strong> (<em>ndarray</em>) – interpolated surface for wind on the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>dc_yesterday</strong> (<em>ndarray</em>) – array of DC values for yesterday</p></li>
<li><p><strong>index</strong> (<em>int</em>) – index of the date since Mar 1</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to show the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – mask for the start dates</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – mask for the end dates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array of ffmc values on the date on interest for the study area</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.FWI">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">FWI</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">isi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bui</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.FWI" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate FWI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>isi</strong> (<em>ndarray</em>) – calculated isi surface for the date of interest</p></li>
<li><p><strong>bui</strong> (<em>ndarray</em>) – calculated bui surface for the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether or not to show the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – start up mask</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – shut down mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>calculated FWI surface for the study area</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.ISI">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">ISI</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ffmc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wind_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endMask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.ISI" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate ISI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ffmc</strong> (<em>ndarray</em>) – ffmc array for the date of interest</p></li>
<li><p><strong>wind_grid</strong> (<em>ndarray</em>) – wind speed interpolated array for the date of interest</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the shapefile</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether or not to display the map</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – mask for the start up date</p></li>
<li><p><strong>endMask</strong> (<em>ndarray</em>) – mask for the shutdown date</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the calculated array for ISI for the study area</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.calc_duration_in_ecozone">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">calc_duration_in_ecozone</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_of_ecozone_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.calc_duration_in_ecozone" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculation the yearly duration between years 1-2 and output to dictionary for graphing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path_daily</strong> (<em>string</em>) – path to the daily files</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>list</em>) – the index of the elevation data column in the lookup file</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the shapefile of the study area</p></li>
<li><p><strong>list_of_ecozone_names</strong> (<em>list</em>) – list of ecozone names you want to calculate duration for, ex [‘taiga’,’hudson’],
must correspond to the names of the shapefiles in the folder ecozone_shp in the working directory</p></li>
<li><p><strong>year1</strong> (<em>int</em>) – start year</p></li>
<li><p><strong>year2</strong> (<em>int</em>) – end year</p></li>
<li><p><strong>method</strong> (<em>string</em>) – spatial model, one of: IDW2,IDW3,IDW4,TPSS,RF</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – whether or not to expand area by 200km</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary keyed by year then ecozone that contains a list of durations from year1-year2 (year2 inclusive)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.calc_season_change">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">calc_season_change</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">earlier_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">later_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.calc_season_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the change between seasons so we can evaluate how much the season has changed over time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>earlier_array</strong> (<em>ndarray</em>) – array of fire season duration values for the earlier year, ex 1922</p></li>
<li><p><strong>later_array</strong> (<em>ndarray</em>) – array of fire season duration values for the later year, ex 2019</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array containing the difference for each pixel</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.dc_overwinter_procedure">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">dc_overwinter_procedure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_DC_val_before_shutdown_masked_reshape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwinter_pcp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.dc_overwinter_procedure" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the overwinter procedure, see Wang et al. (2017) for more details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>last_DC_val_before_shutdown_masked_reshape</strong> (<em>ndarray</em>) – output of get_last_dc_before_shutdown, array containing the last dc value before the station shut
down interpolated across the study area</p></li>
<li><p><strong>overwinter_pcp</strong> (<em>ndarray</em>) – overwinter precipitation amount in each cell</p></li>
<li><p><strong>b_list</strong> (<em>list</em>) – list containing information for the b parameter, can be formatted into an array (loaded from .json)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em></p></li>
<li><p><em>- the new values for the start-up DC procedure, to be used in areas identified as needing the overwinter procedure</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.end_date_calendar_csv">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">end_date_calendar_csv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_month</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.end_date_calendar_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of where each station meets the end criteria see
Wotton &amp; Flannigan 1993, plus a reference dictionary for the lat lon of the stations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path_daily</strong> (<em>string</em>) – path to the csv files containing the daily data from Environment &amp; Climate Change Canada</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year to find the fire season start up date for</p></li>
<li><p><strong>search_month</strong> (<em>string</em>) – the month (day 1) you want to start searching for the end date, enter ‘sep’ or ‘oct’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>dictionary containing the start up date for each station (days since Mar 1)</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>the latitude and longitude of those stations</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.extract_fire_season_frm_NFDB">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">extract_fire_season_frm_NFDB</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ecozone_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_date_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_date_start</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.extract_fire_season_frm_NFDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first and last lightning-caused ignitions from the database in ecozone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>string</em>) – path to ignition lookup file</p></li>
<li><p><strong>year1</strong> (<em>int</em>) – start year</p></li>
<li><p><strong>year2</strong> (<em>int</em>) – end year</p></li>
<li><p><strong>ecozone_path</strong> (<em>string</em>) – path to the ecozone shapefile</p></li>
<li><p><strong>out_path</strong> (<em>string</em>) – where to save the results file</p></li>
<li><p><strong>search_date_end</strong> (<em>string</em>) – ‘oct’ or ‘sep’, when to start looking for the last date</p></li>
<li><p><strong>search_date_start</strong> (<em>string</em>) – ‘feb’ or ‘mar’, when to start looking for the last date, January start dates considered unrealistic…</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>string</em> –</p>
<ul>
<li><p>first lightning caused ignition in ecozone</p></li>
</ul>
</li>
<li><p><em>string</em> –</p>
<ul>
<li><p>last lightning caused ignition in ecozone</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.get_date_index">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">get_date_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.get_date_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of days for the date of interest from the first of the month of interest
Example, convert to days since March 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>string</em>) – year of interest</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – input date of interest</p></li>
<li><p><strong>month</strong> (<em>int</em>) – the month from when you want to calculate the date (ex, 04 for March)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>days since 1st of the month of interest</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.get_last_dc_before_shutdown">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">get_last_dc_before_shutdown</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dc_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endsurface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwinter_reqd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.get_last_dc_before_shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an array of the last dc vals before station shutdown for winter for the study area</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dc_list</strong> (<em>list</em>) – a list of the interpolated surfaces for the drought code for each day in the fire season (from auto_select module, execute_sequential_calc)</p></li>
<li><p><strong>endsurface</strong> (<em>ndarray</em>) – array for end dates for the year before the year of interest</p></li>
<li><p><strong>overwinter_reqd</strong> (<em>ndarray</em>) – where the overwinter procedure is required</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot the map</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of dc values before shutdown for cells requiring overwinter procedure</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.get_overwinter_pcp">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">get_overwinter_pcp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">overwinter_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_surface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_surface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latlon_dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.get_overwinter_pcp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total amount of overwinter pcp for the purpose of knowing where to use the
overwinter DC procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>overwinter_dates</strong> (<em>list</em>) – list of dates that are in the winter (i.e. station shut down to start up), you can just input generally
Oct 1-June 1 and stations that are still active will be masked out</p></li>
<li><p><strong>file_path_daily</strong> (<em>string</em>) – file path to the daily feather files containing the precipitation data</p></li>
<li><p><strong>start_surface</strong> (<em>ndarray</em>) – array containing the interpolated start-up date for each cell</p></li>
<li><p><strong>end_surface</strong> (<em>ndarray</em>) – array containing the interpolated end date for each cell, from the year before</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of the study area</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether to print a map</p></li>
<li><p><strong>date_dictionary</strong> (<em>dictionary</em>) – lookup file that has what day/month pairs each station contains data for (loaded from .json file)</p></li>
<li><p><strong>latlon_dictionary</strong> (<em>dictionary</em>) – lat lons of the daily stations (loaded from .json file)</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – file path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>list</em>) – the index of the elevation data column in the lookup file</p></li>
<li><p><strong>json</strong> (<em>bool</em>) – if True, convert the array to a flat list so it can be written as a .json file to the hard drive</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array of interpolated overwinter precipitation for the study area</p></li>
</ul>
</li>
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>array indicating where the overwinter DC procedure is needed</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.make_end_date_mask">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">make_end_date_mask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_interpolated_surface</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.make_end_date_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the interpolated surface of end dates into a numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day_index</strong> (<em>int</em>) – index of the day of interest since Oct 1 (or potentially Sep 1)</p></li>
<li><p><strong>day_interpolated_surface</strong> (<em>ndarray</em>) – the interpolated surface of the start dates across the study area</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a mask array of the end date, either activated (1) or inactivated (np.nan)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.make_start_date_mask">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">make_start_date_mask</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day_interpolated_surface</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.make_start_date_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn the interpolated surface of start dates into a numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day_index</strong> (<em>int</em>) – index of the day of interest since Mar 1</p></li>
<li><p><strong>day_interpolated_surface</strong> (<em>ndarray</em>) – the interpolated surface of the start dates across the study area</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a mask array of the start date, either activated (1) or inactivated (np.nan)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.plot_all">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">plot_all</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fwi_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.plot_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize all values for entire season
Note: do not have to change index if it is a leap year because we are counting from March 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fwi_list</strong> (<em>list</em>) – list of fwi metric arrays for a certain measure (i.e. dmc)</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of study area</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year of interest</p></li>
<li><p><strong>var</strong> (<em>string</em>) – variable name of interest (i.e. “Duff Moisture Code”)</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to study area shapefile</p></li>
<li><p><strong>shapefile2</strong> (<em>string</em>) – path to masking shapefile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.plot_july">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">plot_july</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fwi_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.plot_july" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize all values for July.
Note: do not have to change index if it is a leap year because we are counting from March 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fwi_list</strong> (<em>list</em>) – list of fwi metric arrays for a certain measure (i.e. dmc)</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of study area</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year of interest</p></li>
<li><p><strong>var</strong> (<em>string</em>) – variable name of interest (i.e. “Duff Moisture Code”)</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to study area shapefile</p></li>
<li><p><strong>shapefile2</strong> (<em>string</em>) – path to masking shapefile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.plot_june">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">plot_june</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fwi_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.plot_june" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize all values for June.
Note: do not have to change index if it is a leap year because we are counting from March 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fwi_list</strong> (<em>list</em>) – list of fwi metric arrays for a certain measure (i.e. dmc)</p></li>
<li><p><strong>maxmin</strong> (<em>list</em>) – bounds of study area</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year of interest</p></li>
<li><p><strong>var</strong> (<em>string</em>) – variable name of interest (i.e. “Duff Moisture Code”)</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to study area shapefile</p></li>
<li><p><strong>shapefile2</strong> (<em>string</em>) – path to masking shapefile</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fwi.start_date_calendar_csv">
<code class="sig-prename descclassname"><span class="pre">fwi.</span></code><code class="sig-name descname"><span class="pre">start_date_calendar_csv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#fwi.start_date_calendar_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of where each station meets the start up criteria,
plus a reference dictionary for the lat lon of the stations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path_daily</strong> (<em>string</em>) – path to the csv files containing the daily data from Environment &amp; Climate Change Canada</p></li>
<li><p><strong>year</strong> (<em>string</em>) – year to find the fire season start up date for</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>dictionary containing the start up date for each station (days since Mar 1)</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>the latitude and longitude of those stations</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-get_data">
<span id="get-data"></span><h2>get_data<a class="headerlink" href="#module-get_data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Summary<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The functions in this file are used for extracting data from the weather data files
downloaded from Environment &amp; Climate Change Canada and terrain lookup files (ex,
slope, drainage).</p>
<p class="rubric">References</p>
<p>get_b relies on information from Lawson &amp; Armitage (2008)</p>
<p>Lawson, B., &amp; Armitage, O. (2008). Weather Guide for the Canadian Forest Fire Danger Rating System. Natural Resources Canada.</p>
<dl class="py function">
<dt id="get_data.calc_season_duration">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">calc_season_duration</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_surface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_surface</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.calc_season_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>For fire season, once we have created the continuous surfaces, we need to calculate for
each pixel what is the estimated duration (for the year).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_surface</strong> (<em>ndarray</em>) – the array of the start dates generated from a function such as IDW()</p></li>
<li><p><strong>end_surface</strong> (<em>ndarray</em>) – the array of the end dates <a href="#id5"><span class="problematic" id="id6">*</span></a>these need to be the same size and should automatically be</p></li>
<li><p><strong>year</strong> (<em>int</em>) – the year that we are calculating the duration for, mostly needed to account for a leap year</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>an array of the study area for the estimated fire season in the array</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.combine_stations">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">combine_stations</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_hourly</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.combine_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine dictionaries with station names as keys. For example, hourly stations
&amp; daily stations for the fire season calculations. Daily dictionary takes precedence,
meaning the overlapping key will be dropped from the hourly one</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary_daily</strong> (<em>dictionary</em>) – dictionary of daily stations and the weather values there</p></li>
<li><p><strong>dictionary_hourly</strong> (<em>dictionary</em>) – dictionary of hourly stations and the weather values there</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary contining information from both the hourly and daily stations</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.convert_to_feather">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">convert_to_feather</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.convert_to_feather" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the Environment &amp; Climate Change Canada csv files into feather files, to allow for faster processing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>string</em>) – file path to the csv files provided by Environment &amp; Climate Change Canada, not including the name of the file</p></li>
<li><p><strong>out_path</strong> (<em>string</em>) – where you want the new feather file to be written to in the computer, not including the new file name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.finding_data_frm_lookup">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">finding_data_frm_lookup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">projected_coordinates_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.finding_data_frm_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dictionary of values for each input point from the lookup file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>projected_coordinates_list</strong> (<em>list</em>) – list of coordinates (list of tuples) that you want to find data in the lookup file for, must be in lon, lat format</p></li>
<li><p><strong>file_path</strong> (<em>string</em>) – file path to the lookup file, includes the file name and ending</p></li>
<li><p><strong>idx_list</strong> (<em>list</em>) – output of get_col_name_list, we will just take the first entry</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of values for each coordinate (taken from the closest point in the lookup file to the input coordinate)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_average_in_ecozone">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_average_in_ecozone</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boolean_ecozone</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continuous_surface</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_average_in_ecozone" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a function to get the average of the array cells with centroids that are within an ecozone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boolean_ecozone</strong> (<em>ndarray</em>) – a boolean array delineating the raster cells belonging to the ecozone</p></li>
<li><p><strong>continuous_surface</strong> (<em>ndarray</em>) – an array of values for the study area</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>the average if the array values that fall inside the ecozone</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_b">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_b</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_slope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_slope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_drainage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_drainage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_b" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a permanent lookup file for b for study area for future processing to be used in overwinter DC procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – dictionary of latitude and longitudes for the hourly stations</p></li>
<li><p><strong>file_path_slope</strong> (<em>string</em>) – path to the slope file, includes file name</p></li>
<li><p><strong>idx_slope</strong> (<em>list</em>) – index of the slope variable in the header of the slope lookup file</p></li>
<li><p><strong>file_path_drainage</strong> (<em>string</em>) – path to the drainage file, includes file name</p></li>
<li><p><strong>idx_drainage</strong> (<em>list</em>) – index of the drainage variable in the header of the drainage lookup file</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the shapefile of the study area (.shp format)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_col_num_list">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_col_num_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_col_num_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the column in the look up file that corresponds to the correct data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>string</em>) – path to the lookup csv file, includes the file name</p></li>
<li><p><strong>col_name</strong> (<em>string</em>) – the column name of the data you want to use in the lookup file, ex. “ELEV”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>list containing all columns in the lookup table that are called col_name</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_daily_lat_lon">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_daily_lat_lon</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_daily_lat_lon" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the latitude and longitude of the daily stations and store in a json file in the directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>string</em>) – file path to the daily csv files provided by Environment &amp; Climate Change Canada, including the name of the file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_intersect_boolean_array">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_intersect_boolean_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ecozone_shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_intersect_boolean_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain a boolean array of where the ecozone is 0 = pixel NOT in ecozone, otherwise 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ecozone_shapefile</strong> (<em>string</em>) – path to ecozone shapefile, including name</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to shapefile</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – show a map if you want to check it has rasterized the shapefile correctly</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – whether to expand study area by 200km</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>array 1/0 if pixel was inside ecozone</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_lat_lon">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_lat_lon</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_lat_lon" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the latitude and longitude of the hourly stations and write to hard drive as a json file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>string</em>) – file path to the hourly csv files provided by Environment &amp; Climate Change Canada, including the name of the file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_noon_temp">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_noon_temp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_noon_temp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary for noon temp data on the input date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date for the date of interest, in the format: YYYY-MM-DD HH:MM</p></li>
<li><p><strong>file_path</strong> (<em>string</em>) – path to the feather files containing the hourly data from Environment &amp; Climate Change Canada</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of temperature values for all the active &amp; non-null stations on the input date</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_pcp">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_pcp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_dictionary</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_pcp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary of the precipitation data from the feather files of the daily stations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date for the date of interest, in the format: YYYY-MM-DD HH:MM</p></li>
<li><p><strong>file_path</strong> (<em>string</em>) – path to the feather files containing the hourly data from Environment &amp; Climate Change Canada</p></li>
<li><p><strong>date_dictionary</strong> (<em>dictionary</em>) – lookup file that has what day/month pairs each station is active on to speed up processing, loaded from the .json file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary containing rain amount for each station</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_pcp_dictionary_by_year">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_pcp_dictionary_by_year</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_pcp_dictionary_by_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lookup file for the year_month that each daily station has data for faster
processing later –&gt; this is an input to get_pcp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>string</em>) – file path to the daily csv files provided by Environment &amp; Climate Change Canada, including the name of the file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_relative_humidity">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_relative_humidity</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_relative_humidity" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary for rh% data on the input date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date for the date of interest, in the format: YYYY-MM-DD HH:MM</p></li>
<li><p><strong>file_path</strong> (<em>string</em>) – path to the feather files containing the hourly data from Environment &amp; Climate Change Canada</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of relative humidity values for all the active &amp; non-null stations on the input date</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_stations_plus_200km">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_stations_plus_200km</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_stations_plus_200km" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary for plotting of the stations included in the analysis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>contains values only for stations inside study area plus 200km</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.get_wind_speed">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">get_wind_speed</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.get_wind_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary for wind speed data on the input date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_date</strong> (<em>string</em>) – input date for the date of interest, in the format: YYYY-MM-DD HH:MM</p></li>
<li><p><strong>file_path</strong> (<em>string</em>) – path to the feather files containing the hourly data from Environment &amp; Climate Change Canada</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of wind speed values for all the active &amp; non-null stations on the input date</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.is_station_in_boreal">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">is_station_in_boreal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boreal_shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.is_station_in_boreal" title="Permalink to this definition">¶</a></dt>
<dd><p>For the fire season code, we are only interested in stations within the boreal zone,
so we need to get a list of stations that are located there.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – locations of the stations</p></li>
<li><p><strong>days_dict</strong> (<em>dictionary</em>) – stations we are interested in, output of get_start_date_calendar_csv/end_date</p></li>
<li><p><strong>boreal_shapefile</strong> (<em>string</em>) – file path leading to the .shp file that delineates the boreal forest</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary of whether it is in area, organized boreal_dict[station_name] = True</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="get_data.stack_and_average">
<code class="sig-prename descclassname"><span class="pre">get_data.</span></code><code class="sig-name descname"><span class="pre">stack_and_average</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_daily</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_hourly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#get_data.stack_and_average" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fire season duration for every year in between the two input years
and average them. Output the average array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year1</strong> (<em>int</em>) – first year taken into account</p></li>
<li><p><strong>year2</strong> (<em>int</em>) – last year taken into account</p></li>
<li><p><strong>file_path_daily</strong> (<em>string</em>) – path to the daily weather csv files from Environment &amp; Climate Change Canada</p></li>
<li><p><strong>file_path_hourly</strong> (<em>string</em>) – path to the hourly feather files</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>list</em>) – column index of elevation information in the lookup file</p></li>
<li><p><strong>method</strong> (<em>string</em>) – type of interpolation to use to create the yearly arrays, one of: ‘IDW2’, ‘IDW3’, ‘IDW4’, ‘TPSS’, ‘RF’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>average of each pixel of all the years considered in array format</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-gpr">
<span id="gpr"></span><h2>gpr<a class="headerlink" href="#module-gpr" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Summary<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Spatial interpolation functions for gaussian process regression interpolation using the scikit-learn package.</p>
<p class="rubric">References</p>
<p>scikit-learn developers. (2019). 1.7.1. Gaussian Process Regression (GPR). Retrieved September 26, 2020, from <a class="reference external" href="https://scikit-learn.org/stable/modules/gaussian_process.html">https://scikit-learn.org/stable/modules/gaussian_process.html</a>
scikit-learn developers. (2019a). sklearn.gaussian_process.GaussianProcessRegressor. Retrieved  September 26, 2020, from <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.gaussian_process.GaussianProcessRegressor.html#sklearn.gaussian_process.GaussianProcessRegressor">https://scikit-learn.org/stable/modules/generated/sklearn.gaussian_process.GaussianProcessRegressor.html#sklearn.gaussian_process.GaussianProcessRegressor</a>
Rasmussen, C. E., &amp; Williams, C. K. I. (2006). Gaussian processes for machine learning. 2006. In The MIT Press, Cambridge, MA, USA (Vol. 38, Issue 2).</p>
<dl class="py function">
<dt id="gpr.GPR_interpolator">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">GPR_interpolator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restarts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_initiate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'RBF'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.GPR_interpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base interpolator function for gaussian process regression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot a map</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – file path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>list</em>) – the index of the elevation data column in the lookup file</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
<li><p><strong>kernel_object</strong> (<em>list</em>) – kernel object describing input kernel you want to use, if optimizing a set of parameters, can input empty list</p></li>
<li><p><strong>restarts</strong> (<em>int</em>) – number of times to restart to avoid local optima</p></li>
<li><p><strong>report_params</strong> (<em>bool</em>) – if True, outputs optimized values for kernel hyperparameters</p></li>
<li><p><strong>optimizer</strong> (<em>bool</em>) – if False, fix parameters of covariance function</p></li>
<li><p><strong>param_initiate</strong> (<em>list</em>) – input parameters needed to start optimization, controls extent of the spatial autocorrelation modelled by the process
whether the spatial autocorrelation is the same in all directions will depend on the inputs for parameters,
you need to input the parameters of the function (distribution) as a vector not a scalar
since we are working in 3d (latitude, longitude, elevation) the vector must be len=3 because this corresponds to the [x,y,z]
if we are using an anisotropic distribution
…for isotropic 1d, [1] (or if 2 parameters, [[1],[1]]), for anisotropic, will be [1,1,1] or [[1,1],[1,1],[1,1]]</p></li>
<li><p><strong>cov_type</strong> (<em>str</em>) – type of covariance function to use if have not specified a kernel object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>an array of the interpolated values</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gpr.cross_validate_gpr">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">cross_validate_gpr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_function</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.cross_validate_gpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave-one-out cross-validation procedure for GPR</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>cov_function</strong> (<em>list</em>) – list containing a string that describes the input covariance function, similar to: [‘316**2 * Matern(length_scale=[5e+05, 5e+05, 6.01e+03], nu=0.5)’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each station when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gpr.select_block_size_gpr">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">select_block_size_gpr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nruns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boreal_shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_function</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.select_block_size_gpr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Evaluate the standard deviation of MAE values based on consective runs of the cross-valiation,</dt><dd><p>in order to select the block/cluster size</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nruns</strong> (<em>int</em>) – number of repetitions</p></li>
<li><p><strong>group_type</strong> (<em>string</em>) – whether using ‘clusters’ or ‘blocks’</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>cluster_num1-3</strong> (<em>int</em>) – three cluster numbers to test, for blocking this must be one of three:25, 16, 9
you can enter ‘None’ and it will automatically test 25, 16, 9</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – expand area by 200km</p></li>
<li><p><strong>boreal_shapefile</strong> (<em>string</em>) – path to shapefile with the boreal zone</p></li>
<li><p><strong>cov_function</strong> (<em>list</em>) – list containing a string that describes the input covariance function, similar to: [‘316**2 * Matern(length_scale=[5e+05, 5e+05, 6.01e+03], nu=0.5)’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int</em> –</p>
<ul>
<li><p>block/cluster number with lowest stdev</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>average MAE of all the runs for that cluster/block number</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gpr.shuffle_split_gpr">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">shuffle_split_gpr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.shuffle_split_gpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffle split cross-validation procedure for GPR</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>cov_function</strong> (<em>list</em>) – list containing a string that describes the input covariance function, similar to: [‘316**2 * Matern(length_scale=[5e+05, 5e+05, 6.01e+03], nu=0.5)’]</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>MAE estimate for entire surface (average of replications)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gpr.spatial_groups_gpr">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">spatial_groups_gpr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_Groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.spatial_groups_gpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Stratified shuffle-split cross-validation procedure for gpr</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>nfolds</strong> (<em>int</em>) – number of folds to create (essentially repetitions)</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement between folds, should usually be true</p></li>
<li><p><strong>dictionary_Groups</strong> (<em>dictionary</em>) – dictionary of what groups (clusters) the stations belong to</p></li>
<li><p><strong>cov_function</strong> (<em>list</em>) – list containing a string that describes the input covariance function, similar to: [‘316**2 * Matern(length_scale=[5e+05, 5e+05, 6.01e+03], nu=0.5)’]</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gpr.spatial_kfold_gpr">
<code class="sig-prename descclassname"><span class="pre">gpr.</span></code><code class="sig-name descname"><span class="pre">spatial_kfold_gpr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gpr.spatial_kfold_gpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatially blocked k-folds cross-validation procedure for gpr</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>cov_function</strong> (<em>list</em>) – list containing a string that describes the input covariance function, similar to: [‘316**2 * Matern(length_scale=[5e+05, 5e+05, 6.01e+03], nu=0.5)’]</p></li>
<li><p><strong>block_num</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>blocking_type</strong> (<em>string</em>) – whether to use clusters or blocks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE estimate for entire surface</p></li>
</ul>
</li>
<li><p><em>int</em> –</p>
<ul>
<li><p>Return the block number just so we can later write it into the file to keep track</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-idew">
<span id="idew"></span><h2>idew<a class="headerlink" href="#module-idew" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3>Summary<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Code for inverse distance elevation weighting with a weight of 0.8 for distance (Euclidean) and 0.2 for distance (vertical).</p>
<p class="rubric">References</p>
<p>For weights:</p>
<p>Daly, C., Gibson, W. P., Taylor, G. H., Johnson, G. L., &amp; Pasteris, P. (2002).
A knowledge-based approach to the statistical mapping of climate. Climate Research, 22(2), 99–113. <a class="reference external" href="https://doi.org/10.3354/cr022099">https://doi.org/10.3354/cr022099</a></p>
<dl class="py function">
<dt id="idew.IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse distance elevation weighting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – the name of the variable you are interpolating</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot a map</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>the array of values for the interpolated surface</p></li>
</ul>
</li>
<li><p><em>list</em> –</p>
<ul>
<li><p>the bounds of the array surface, for use in other functions</p></li>
</ul>
</li>
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>elevation array (for use in the random forest module</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idew.cross_validate_IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">cross_validate_IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.cross_validate_IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave-one-out cross-validation procedure for IDEW</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each station when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idew.select_block_size_IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">select_block_size_IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nruns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.select_block_size_IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the standard deviation of MAE values based on consective runs of the cross-valiation,
in order to select the block/cluster size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nruns</strong> (<em>int</em>) – number of repetitions</p></li>
<li><p><strong>group_type</strong> (<em>string</em>) – whether using ‘clusters’ or ‘blocks’</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int</em> –</p>
<ul>
<li><p>block/cluster number with lowest stdev</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>average MAE of all the runs for that cluster/block number</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idew.shuffle_split_IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">shuffle_split_IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.shuffle_split_IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffle-split cross-validation with 50/50 training test split</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>MAE estimate for entire surface (average of replications)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idew.spatial_groups_IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">spatial_groups_IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_Groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.spatial_groups_IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Stratified shuffle-split cross-validation procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>nfolds</strong> (<em>int</em>) – number of folds to create (essentially repetitions)</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement between folds, should usually be true</p></li>
<li><p><strong>dictionary_Groups</strong> (<em>dictionary</em>) – dictionary of what groups (clusters) the stations belong to</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idew.spatial_kfold_IDEW">
<code class="sig-prename descclassname"><span class="pre">idew.</span></code><code class="sig-name descname"><span class="pre">spatial_kfold_IDEW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idew.spatial_kfold_IDEW" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatially blocked k-folds cross-validation procedure for IDEW</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>block_num</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>blocking_type</strong> (<em>string</em>) – whether to use clusters or blocks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE estimate for entire surface</p></li>
</ul>
</li>
<li><p><em>int</em> –</p>
<ul>
<li><p>Return the block number just so we can later write it into the file to keep track</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-idw">
<span id="idw"></span><h2>idw<a class="headerlink" href="#module-idw" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Summary<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Code for interpolating weather data using inverse distance weighting interpolation.</p>
<p class="rubric">References</p>
<p>Code for IDW modified from <a class="reference external" href="https://stackoverflow.com/questions/3104781/inverse-distance-weighted-idw-interpolation-with-python?rq=1">https://stackoverflow.com/questions/3104781/inverse-distance-weighted-idw-interpolation-with-python?rq=1</a> (answer by Joe Kington)</p>
<p>Kington, J. “Inverse Distance Weighted (IDW) Interpolation with Python” <a class="reference external" href="https://stackoverflow.com/questions/3104781/inverse-distance-weighted-idw-interpolation-with-python?rq=1">https://stackoverflow.com/questions/3104781/inverse-distance-weighted-idw-interpolation-with-python?rq=1</a>. Jun 2010.
Last accessed: 2020-12-26.</p>
<dl class="py function">
<dt id="idw.IDW">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">IDW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.IDW" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse distance weighting interpolation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – the name of the variable you are interpolating</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot a map</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>the array of values for the interpolated surface</p></li>
</ul>
</li>
<li><p><em>list</em> –</p>
<ul>
<li><p>the bounds of the array surface, for use in other functions</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idw.cross_validate_IDW">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">cross_validate_IDW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pass_to_plot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.cross_validate_IDW" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave-one-out cross-validation procedure for IDW</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>pass_to_plot</strong> (<em>bool</em>) – whether you will be plotting the error and need a version without absolute value error (i.e. fire season days)</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>a dictionary of the absolute error at each station when it was left out</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if pass_to_plot = True, returns a dictionary without the absolute value of the error, for example for plotting fire season error</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idw.select_block_size_IDW">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">select_block_size_IDW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nruns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boreal_shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.select_block_size_IDW" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the standard deviation of MAE values based on consective runs of the cross-valiation, in order to select the block/cluster size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nruns</strong> (<em>int</em>) – number of repetitions</p></li>
<li><p><strong>group_type</strong> (<em>string</em>) – whether using ‘clusters’ or ‘blocks’</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>cluster_num1-3</strong> (<em>int</em>) – three cluster numbers to test, for blocking this must be one of three:25, 16, 9
you can enter ‘None’ and it will automatically test 25, 16, 9</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – expand area by 200km</p></li>
<li><p><strong>boreal_shapefile</strong> (<em>string</em>) – path to shapefile with the boreal zone</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int</em> –</p>
<ul>
<li><p>block/cluster number with lowest stdev</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>average MAE of all the runs for that cluster/block number</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idw.shuffle_split">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">shuffle_split</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.shuffle_split" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffle-split cross-validation with 50/50 training test split</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – if you want to show a map of the clusters</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>MAE estimate for entire surface (average of replications)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idw.spatial_groups_IDW">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">spatial_groups_IDW</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_Groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.spatial_groups_IDW" title="Permalink to this definition">¶</a></dt>
<dd><p>Stratified shuffle-split cross-validation procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>nfolds</strong> (<em>int</em>) – number of folds to create (essentially repetitions)</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement between folds, should usually be true</p></li>
<li><p><strong>dictionary_Groups</strong> (<em>dictionary</em>) – dictionary of what groups (clusters) the stations belong to</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="idw.spatial_kfold_idw">
<code class="sig-prename descclassname"><span class="pre">idw.</span></code><code class="sig-name descname"><span class="pre">spatial_kfold_idw</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_error</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#idw.spatial_kfold_idw" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatially blocked k-fold cross-validation procedure for IDW</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>d</strong> (<em>int</em>) – the weighting for IDW interpolation</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>block_num</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>blocking_type</strong> (<em>string</em>) – whether to use clusters or blocks</p></li>
<li><p><strong>return_error</strong> (<em>bool</em>) – whether or not to return the error dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE estimate for entire surface</p></li>
</ul>
</li>
<li><p><em>int</em> –</p>
<ul>
<li><p>Return the block number just so we can later write it into the file to keep track</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if return_error = True, a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-make_blocks">
<span id="make-blocks"></span><h2>make_blocks<a class="headerlink" href="#module-make_blocks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Summary<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Code for creating spatial blocks for cross-validation.</p>
<dl class="py function">
<dt id="make_blocks.make_block">
<code class="sig-prename descclassname"><span class="pre">make_blocks.</span></code><code class="sig-name descname"><span class="pre">make_block</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#make_blocks.make_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide the study area into blocks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_grid</strong> (<em>ndarray</em>) – the example idw grid to base the size of the group array off of</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks to create, either 4, 9, 16, 25</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>an array with the block value contained in each pixel</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="make_blocks.sorting_stations">
<code class="sig-prename descclassname"><span class="pre">make_blocks.</span></code><code class="sig-name descname"><span class="pre">sorting_stations</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#make_blocks.sorting_stations" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the stations in each block and create a reference dictionary for this information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blocks</strong> (<em>ndarray</em>) – output of the make_block function</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to shapefile of study area</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – dictionary with weather station locations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – the dictionary keyed by station containing the weather data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>dictionary of the block number for each station</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-rf">
<span id="rf"></span><h2>rf<a class="headerlink" href="#module-rf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id11">
<h3>Summary<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Spatial interpolation functions for random forest interpolation using the scikit-learn package.</p>
<dl class="py function">
<dt id="rf.cross_validate_rf">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">cross_validate_rf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pass_to_plot</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.cross_validate_rf" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave-one-out cross-validation procedure for RF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>pass_to_plot</strong> (<em>bool</em>) – whether you will be plotting the error and need a version without absolute value error (i.e. fire season days)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>a dictionary of the absolute error at each station when it was left out</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if pass_to_plot = True, returns a dictionary without the absolute value of the error, for example for plotting fire season error</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rf.random_forest_interpolator">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">random_forest_interpolator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.random_forest_interpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Random forest interpolation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – the name of the variable you are interpolating</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot a map</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>the array of values for the interpolated surface</p></li>
</ul>
</li>
<li><p><em>list</em> –</p>
<ul>
<li><p>the bounds of the array surface, for use in other functions</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rf.select_block_size_rf">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">select_block_size_rf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nruns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boreal_shapefile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.select_block_size_rf" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the standard deviation of MAE values based on consective runs of the cross-valiation,
in order to select the block/cluster size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nruns</strong> (<em>int</em>) – number of repetitions</p></li>
<li><p><strong>group_type</strong> (<em>string</em>) – whether using ‘clusters’ or ‘blocks’</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>cluster_num1-3</strong> (<em>int</em>) – three cluster numbers to test, for blocking this must be one of three:25, 16, 9
you can enter ‘None’ and it will automatically test 25, 16, 9</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – expand area by 200km</p></li>
<li><p><strong>boreal_shapefile</strong> (<em>string</em>) – path to shapefile with the boreal zone</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int</em> –</p>
<ul>
<li><p>block/cluster number with lowest stdev</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>average MAE of all the runs for that cluster/block number</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rf.shuffle_split_rf">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">shuffle_split_rf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.shuffle_split_rf" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffle-split cross-validation with 50/50 training test split</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>MAE estimate for entire surface (average of replications)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rf.spatial_groups_rf">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">spatial_groups_rf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_Groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.spatial_groups_rf" title="Permalink to this definition">¶</a></dt>
<dd><p>Stratified shuffle-split cross-validation procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>nfolds</strong> (<em>int</em>) – number of folds to create (essentially repetitions)</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement between folds, should usually be true</p></li>
<li><p><strong>dictionary_Groups</strong> (<em>dictionary</em>) – dictionary of what groups (clusters) the stations belong to</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="rf.spatial_kfold_rf">
<code class="sig-prename descclassname"><span class="pre">rf.</span></code><code class="sig-name descname"><span class="pre">spatial_kfold_rf</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elev_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_error</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rf.spatial_kfold_rf" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatially blocked k-fold cross-validation procedure for RF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>elev_array</strong> (<em>ndarray</em>) – array for elevation, create using IDEW interpolation (this is a trick to speed up code)</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>block_num</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>blocking_type</strong> (<em>string</em>) – whether to use clusters or blocks</p></li>
<li><p><strong>return_error</strong> (<em>bool</em>) – whether or not to return the error dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE estimate for entire surface</p></li>
</ul>
</li>
<li><p><em>int</em> –</p>
<ul>
<li><p>Return the block number just so we can later write it into the file to keep track</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if return_error = True, a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-tps">
<span id="tps"></span><h2>tps<a class="headerlink" href="#module-tps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Summary<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>Interpolation functions for thin plate splines using the radial basis function from SciPy.</p>
<p class="rubric">References</p>
<p>Flannigan, M. D., &amp; Wotton, B. M. (1989). A study of interpolation methods for forest fire danger rating in Canada.
Canadian Journal of Forest Research, 19(8), 1059–1066. <a class="reference external" href="https://doi.org/10.1139/x89-161">https://doi.org/10.1139/x89-161</a></p>
<p>For phi calculation (smoothing parameter):</p>
<p>SciPy Community. (2014). SciPy Reference Guide Release 0.14.0 (pp. 34).</p>
<dl class="py function">
<dt id="tps.TPS">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">TPS</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile_masking</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.TPS" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin plate splines interpolation implemented using the interpolate radial basis function from
SciPy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>input_date</strong> (<em>string</em>) – the date you want to interpolate for</p></li>
<li><p><strong>var_name</strong> (<em>string</em>) – the name of the variable you are interpolating</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – whether you want to plot a map</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether the function will automatically calculate phi (use if expand_area == True); if calc_phi == True, the function will ignore the input value for phi</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>ndarray</em> –</p>
<ul>
<li><p>the array of values for the interpolated surface</p></li>
</ul>
</li>
<li><p><em>list</em> –</p>
<ul>
<li><p>the bounds of the array surface, for use in other functions</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tps.cross_validate_tps">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">cross_validate_tps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pass_to_plot</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.cross_validate_tps" title="Permalink to this definition">¶</a></dt>
<dd><p>Leave-one-out cross-validation for thin plate splines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>latlon_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile, including its name</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing</p></li>
<li><p><strong>pass_to_plot</strong> (<em>bool</em>) – whether you will be plotting the error and need a version without absolute value error (i.e. fire season days)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>a dictionary of the absolute error at each station when it was left out</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if pass_to_plot = True, returns a dictionary without the absolute value of the error, for example for plotting fire season error</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tps.select_block_size_tps">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">select_block_size_tps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nruns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_num3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boreal_shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.select_block_size_tps" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the standard deviation of MAE values based on consective runs of the cross-valiation,
in order to select the block/cluster size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nruns</strong> (<em>int</em>) – number of repetitions</p></li>
<li><p><strong>group_type</strong> (<em>string</em>) – whether using ‘clusters’ or ‘blocks’</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing</p></li>
<li><p><strong>cluster_num1-3</strong> (<em>int</em>) – three cluster numbers to test, for blocking this must be one of three:25, 16, 9
you can enter ‘None’ and it will automatically test 25, 16, 9</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – expand area by 200km</p></li>
<li><p><strong>boreal_shapefile</strong> (<em>string</em>) – path to shapefile with the boreal zone</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>int</em> –</p>
<ul>
<li><p>block/cluster number with lowest stdev</p></li>
</ul>
</li>
<li><p><em>float</em> –</p>
<ul>
<li><p>average MAE of all the runs for that cluster/block number</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tps.shuffle_split_tps">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">shuffle_split_tps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">latlon_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.shuffle_split_tps" title="Permalink to this definition">¶</a></dt>
<dd><p>Shuffle-split cross-validation for thin plate splines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>rep</strong> (<em>int</em>) – number of replications</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing, default is None (it is calculated)</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>MAE estimate for entire surface (average of replications)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tps.spatial_groups_tps">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">spatial_groups_tps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocknum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dictionary_Groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expand_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.spatial_groups_tps" title="Permalink to this definition">¶</a></dt>
<dd><p>Stratified shuffle-split cross-validation procedure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing</p></li>
<li><p><strong>blocknum</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>nfolds</strong> (<em>int</em>) – number of folds to create (essentially repetitions)</p></li>
<li><p><strong>replacement</strong> (<em>bool</em>) – whether or not to use replacement between folds, should usually be true</p></li>
<li><p><strong>dictionary_Groups</strong> (<em>dictionary</em>) – dictionary of what groups (clusters) the stations belong to</p></li>
<li><p><strong>expand_area</strong> (<em>bool</em>) – function will expand the study area so that more stations are taken into account (200 km)</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tps.spatial_kfold_tps">
<code class="sig-prename descclassname"><span class="pre">tps.</span></code><code class="sig-name descname"><span class="pre">spatial_kfold_tps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idw_example_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cvar_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path_elev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_phi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tps.spatial_kfold_tps" title="Permalink to this definition">¶</a></dt>
<dd><p>Spatially blocked k-folds cross-validation procedure for thin plate splines</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idw_example_grid</strong> (<em>ndarray</em>) – used for reference of study area grid size</p></li>
<li><p><strong>loc_dict</strong> (<em>dictionary</em>) – the latitude and longitudes of the daily/hourly stations</p></li>
<li><p><strong>Cvar_dict</strong> (<em>dictionary</em>) – dictionary of weather variable values for each station</p></li>
<li><p><strong>shapefile</strong> (<em>string</em>) – path to the study area shapefile</p></li>
<li><p><strong>phi</strong> (<em>float</em>) – smoothing parameter for the thin plate spline, if 0 no smoothing</p></li>
<li><p><strong>file_path_elev</strong> (<em>string</em>) – path to the elevation lookup file</p></li>
<li><p><strong>idx_list</strong> (<em>int</em>) – position of the elevation column in the lookup file</p></li>
<li><p><strong>block_num</strong> (<em>int</em>) – number of blocks/clusters</p></li>
<li><p><strong>blocking_type</strong> (<em>string</em>) – whether to use clusters or blocks</p></li>
<li><p><strong>return_error</strong> (<em>bool</em>) – whether or not to return the error dictionary</p></li>
<li><p><strong>calc_phi</strong> (<em>bool</em>) – whether to calculate phi in the function, if True, phi can = None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float</em> –</p>
<ul>
<li><p>MAE estimate for entire surface</p></li>
</ul>
</li>
<li><p><em>int</em> –</p>
<ul>
<li><p>Return the block number just so we can later write it into the file to keep track</p></li>
</ul>
</li>
<li><p><em>dictionary</em> –</p>
<ul>
<li><p>if return_error = True, a dictionary of the absolute error at each fold when it was left out</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">fire_weather_interpolate functions</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-Eval">Eval</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-auto_select">auto_select</a><ul>
<li><a class="reference internal" href="#id1">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-cluster_3d">cluster_3d</a><ul>
<li><a class="reference internal" href="#id2">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-fwi">fwi</a><ul>
<li><a class="reference internal" href="#id3">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-get_data">get_data</a><ul>
<li><a class="reference internal" href="#id4">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-gpr">gpr</a><ul>
<li><a class="reference internal" href="#id7">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-idew">idew</a><ul>
<li><a class="reference internal" href="#id8">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-idw">idw</a><ul>
<li><a class="reference internal" href="#id9">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-make_blocks">make_blocks</a><ul>
<li><a class="reference internal" href="#id10">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-rf">rf</a><ul>
<li><a class="reference internal" href="#id11">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tps">tps</a><ul>
<li><a class="reference internal" href="#id12">Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/fire_weather_interpolate.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Fire Weather Interpolate 0.1.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fire_weather_interpolate functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Clara Risk, Patrick James.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
  </body>
</html>